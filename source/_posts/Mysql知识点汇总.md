---
title: Mysql知识点汇总
date: 2023-07-25 14:13:41
tags:
categories:
- Mysql
---


# 大纲
> 本文是参考自「[小林图解](https://xiaolincoding.com/mysql/index/page.html)」并整理一些见解所得
> 1. 一条sql的执行流程
> 2. Mysql是如何存储数据的
>       行-> 页 -> 区 -> 段 -> 独占表空间。
>       行作为记录单位，常见Compact形式：变长字段长度+Null值列表+行记录头｜row_id+trx_id+roo_ptr｜真实数据
> 3. Mysql中的索引
>       
> 4. 


# 索引
## 从数据页的角度中看待B+树

**页内**是一种叫做「槽」的数据结构；**页间**通过B+树进行索引组织成区。
![](./../img/数据页-Snipaste_2023-07-26_20-02-56.png)
数据页内包含用户记录，每个记录之间用单向链表的方式组织起来，为了加快在数据页内高效查询记录，设计了一个页目录，页目录存储各个槽（分组），且主键值是有序的，于是可以通过二分查找法的方式进行检索从而提高效率。
![](../img/数据页-Snipaste_2023-07-26_20-05-02.png)
为了高效查询记录所在的数据页，InnoDB 采用 b+ 树作为索引，每个节点都是一个数据页。
![](../img/数据页-Snipaste_2023-07-26_20-05-11.png)
InnoDB通过叶子结点来存储真实数据，则为聚簇索引，且只能有一个（如果没有主键，会找第一个不为Null的唯一列作为主键，再没有就会生成隐主键）；存储二级索引主键对的时候，则为二级索引，此时不存储真实数据。

在使用二级索引进行查找数据时，如果查询的数据能在二级索引找到，那么就是「索引覆盖」操作，如果查询的数据不在二级索引里，就需要先在二级索引找到主键值，需要去聚簇索引中获得数据行，这个过程就叫作「回表」。
